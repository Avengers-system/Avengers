<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="resSchManage">
 	<!-- 2017.07.24일자 수정 -->
    <resultMap id="scr" type="java.util.HashMap">
        <result javaType="java.lang.String" column="SCRAPPL_YR" property="scrappl_yr"/>
        <result javaType="java.lang.String" column="SCRAPPL_QTR" property="scrappl_qtr"/>
        <result javaType="java.lang.String" column="SCR_NM" property="scr_nm"/>
        <result javaType="java.lang.String" column="SCR_MONEY" property="scr_money"/>
        <result javaType="java.lang.String" column="STUD_BANK" property="stud_bank"/>
        <result javaType="java.lang.String" column="STUD_AH" property="stud_ah"/>
        <result javaType="java.lang.String" column="STUD_ACT_NUM" property="stud_act_num"/>
        <result javaType="java.lang.String" column="SCRAPPL_CAUSE" property="scrappl_cause"/>
        <result javaType="java.lang.String" column="SCRAPPL_DATE" property="scrappl_date"/>
  </resultMap> 
   <!-- 2017.07.22일자 수정 -->   
   <select id="resSchSelect" parameterType="com.avengers.db.dto.resSchStudentVO" resultType="com.avengers.db.dto.resSchStudentVO">
      SELECT S.STUD_NUM, 
            S.STUD_GRD ,
            S.STUD_NM ,
            S.STUD_QTR ,
            S.STUD_BANK ,
            S.STUD_ACT_NUM ,
            S.STUD_DEPT ,
            S.STUD_SCHREG_CODE ,
            S.STUD_ADDR ,
            D.DEPT_NM ,
            C.COL_NM ,
            T.TL_LCT ,
            T.TL_POINT ,
            T.TL_LEV ,
            T.TL_MARK ,
            L.LCT_CRD ,
            L.LCT_YR ,
            L.LCT_QTR,
            T.TL_ASMT_CHECK 
      FROM STUDENT S,DEPARTMENT D,TL T,LECTURE L,COLLEAGE C
      WHERE S.STUD_NUM =#{stud_num}
      AND S.STUD_DEPT = D.DEPT_NUM
      AND S.STUD_NUM = T.TL_STUD
      AND T.TL_LCT = L.LCT_NUM
      AND D.DEPT_COL = C.COL_CODE
      
   </select>
	<!-- 2017.07.22일자 수정 -->   
   <select id="LoaRtsSelect" parameterType="String" resultType="com.avengers.db.dto.LoaRtsVO">
      SELECT L.LOA_START_DATE 
             ,L.LOA_END_DATE 
             ,R.RTS_APPL_DATE 
             ,R.RTS_DATE 
             ,L.LOA_STUD 
       FROM LOA L,RTS R
       WHERE L.LOA_STUD = #{loa_stud}
       AND L.LOA_STUD = R.RTS_STUD
   </select>  
   
	<!-- 2017.07.24일자 수정 -->
   <select id="scrSelect" parameterType="com.avengers.db.dto.ScrapplVO" resultMap="scr">
      SELECT SCRAPPL_YR,SCRAPPL_QTR,SCR_NM,SCR_MONEY,STUD_BANK,STUD_AH,STUD_ACT_NUM,SCRAPPL_CAUSE,SCRAPPL_DATE 
       FROM SCR,SCRAPPL,STUDENT
       WHERE STUD_NUM=#{scrappl_stud}
       AND STUD_NUM=SCRAPPL_STUD
       AND SCRAPPL_SCR=SCR_NUM
       <if test="scrappl_yr !=null">
       AND SCRAPPL_YR=#{scrappl_yr}
       </if>
       <if test="scrappl_qtr !=null">
       AND SCRAPPL_QTR=#{scrappl_qtr}
       </if>
   </select>
   
   	<!-- 2017.07.24일자 수정 -->
    <select id="scrApplSelect" parameterType="com.avengers.db.dto.ScrapplVO"  resultMap="scr">
      SELECT  SCRAPPL_YR,SCRAPPL_QTR,SCR_NM,SCR_MONEY,SCRAPPL_CAUSE,STUD_BANK,STUD_AH,STUD_ACT_NUM,SCRAPPL_DATE 
       FROM SCR,SCRAPPL,STUDENT
        WHERE STUD_NUM=#{scrappl_stud}
       AND STUD_NUM=SCRAPPL_STUD
       AND SCRAPPL_SCR=SCR_NUM
       <if test="scrappl_yr !=null">
       AND SCRAPPL_YR=#{scrappl_yr}
       </if>
       <if test="scrappl_qtr !=null">
       AND SCRAPPL_QTR=#{scrappl_qtr}
       </if>
   </select>
   <!-- 2017.07.24일자 수정 -->
   <select id="studInfoSelect" parameterType="com.avengers.db.dto.resSchStudentVO" resultType="com.avengers.db.dto.resSchStudentVO">
      SELECT S.STUD_NUM, 
            S.STUD_GRD,
            S.STUD_NM ,
            S.STUD_QTR ,
            S.STUD_BANK ,
            S.STUD_ACT_NUM ,
            S.STUD_DEPT ,
            S.STUD_SCHREG_CODE ,
            S.STUD_ADDR ,
            D.DEPT_NM ,
            C.COL_NM
      FROM STUDENT S,DEPARTMENT D,COLLEAGE C
      WHERE S.STUD_NUM =#{stud_num}
      AND S.STUD_DEPT = D.DEPT_NUM
      AND D.DEPT_COL = C.COL_CODE      
	</select>
</mapper>