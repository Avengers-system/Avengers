<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
	 PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="board">

<select id="getFAQListCount" parameterType="com.avengers.db.dto.BoardVO" resultType="int">
    SELECT COUNT(*)  FROM BOARD WHERE BOARD_BC ='FAQ'  
        <if test="searchFiled != null and searchFiled != ''">
            AND ${searchFiled} LIKE '%' || #{searchValue} || '%'
        </if>
</select>
 
<select id="getFAQList" parameterType="com.avengers.db.dto.BoardVO" resultType="com.avengers.db.dto.BoardVO">
    SELECT 
         a.BOARD_NUM, a.BOARD_TITLE, a.BOARD_CONT, a.BOARD_WRITER, a.BOARD_DATE, a.BOARD_AF, a.BOARD_COUNT, a.BOARD_BC
    FROM (
        SELECT ROWNUM rnum, s.*
        FROM (
            SELECT  BOARD_NUM, BOARD_TITLE, BOARD_CONT, BOARD_WRITER, BOARD_DATE, BOARD_AF, BOARD_COUNT, BOARD_BC
            FROM BOARD
            WHERE BOARD_BC ='FAQ'
            <if test="searchFiled != null and searchFiled != ''">
                AND ${searchFiled} LIKE '%' || #{searchValue} || '%'
            </if>
            ORDER BY BOARD_NUM DESC
        )s
    )a 
WHERE rnum BETWEEN #{startRowNo} AND #{endRowNo}
</select>

<select id="getFAQDetail" parameterType="int" resultType="com.avengers.db.dto.BoardVO">
	select * from board where board_num=#{board_num}
</select>

















	
	<!-- 게시판중 포탈공지사항을 검색하는 구문  -->	
	<select id="selectPortalNoticeList" parameterType="java.lang.String" resultType="com.avengers.db.dto.BoardVO">
		SELECT * FROM BOARD WHERE BOARD_BC='PORTAL'  
	</select>
	<!-- 게시판중 학교공지사항을 검색하는 구문  -->	
	<select id="selectSchoolNoticeList" parameterType="java.lang.String" resultType="com.avengers.db.dto.BoardVO">
		SELECT * FROM BOARD WHERE BOARD_BC='UNIV'  
	</select>
	<!-- 게시판중 학과공지사항을 검색하는 구문 각 학과전용 공지사항 코드는 b+학과이름 이다. -->	
	<select id="selectDepartmentNoticeList" parameterType="java.lang.String" resultType="com.avengers.db.dto.BoardVO">
		SELECT * FROM BOARD WHERE BOARD_BC= #{bc_dept}  
	</select>
	

	
	

	<!-- 학사일정게시판 조회 -->	
	<select id="selectUnivschdList" parameterType="com.avengers.db.dto.BoardVO" resultType="com.avengers.db.dto.BoardVO">
		SELECT * FROM BOARD 
		WHERE BOARD_BC= 'UNIVSCHD' 
		AND BOARD_TITLE LIKE #{board_title}||'%'
		<if test="board_cont != null">
		AND BOARD_CONT = #{board_cont}
		</if>
	</select>

</mapper>
