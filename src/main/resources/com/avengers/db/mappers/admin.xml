<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
	 PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="admin">

	<!-- delete -->

	<update id="deleteStudent" parameterType="java.lang.String">
	UPDATE SECURITY
		SET ENABLED = '0'
		WHERE ID = #{stud_num jdbcType=VARCHAR}
	</update>

	<update id="deleteProfessor" parameterType="java.lang.String">
	UPDATE SECURITY
	SET ENABLED = '0'
	WHERE ID = #{prfs_num jdbcType=VARCHAR}
	</update>

	<!-- id의 경우에는 Mapper.java에 동일하게 사용해야된다. -->
	<select id="selectAdmin" parameterType="com.avengers.db.dto.AdminVO" resultType="com.avengers.db.dto.AdminVO">
		SELECT ADMIN_PIC,
			   ADMIN_ID,
			   ADMIN_NM,
			   ADMIN_BIR,
			   ADMIN_EMAIL,
			   ADMIN_TEL,
			   ADMIN_HP,
			   ADMIN_POST,
			   ADMIN_BANK
		FROM ADMIN
		WHERE ADMIN_ID = #{admin_id}
	</select>
	

	<!-- id의 경우에는 Mapper.java에 동일하게 사용해야된다. -->
	<select id="getAdminInfo" resultType="com.avengers.db.dto.AdminVO" parameterType="string">
		SELECT * FROM ADMIN WHERE ADMIN_ID = #{adminId}
	</select>
	
	<select id="getPersonScheduleInfo" resultType="com.avengers.db.dto.PerschdVO" parameterType="string">
		SELECT * FROM PERSCHD WHERE PERSCHD_WRITER = #{adminId}
	</select>
		
<!-- 	<select id="getProfNum" resultType="string" > -->
<!-- 		select '2017'||lpad(prfs_seq.currval,3,0 )  -->
<!-- 		from dual -->
<!-- 	</select> -->
	
	<insert id="insertProfessor"  parameterType="com.avengers.db.dto.PrfsVO">
		INSERT 
		INTO PROFESSOR
		VALUES (
		'2017'|| lpad(prfs_seq.nextval,3,0 ),
		#{prfs_nm},
		#{prfs_eng_nm},
		#{prfs_bir},
		#{prfs_email},
		#{prfs_pw},
		#{prfs_regno},
		#{prfs_gen},
		#{prfs_pic},
		#{prfs_act_num},
		#{prfs_bank},
		#{prfs_ah},
		#{prfs_addr},
		#{prfs_zip},
		#{prfs_tel},
		#{prfs_hp},
		#{prfs_dept}
		)
 	
	</insert>
	
	<insert id="insertSecurity" parameterType="com.avengers.db.dto.PrfsVO">
	INSERT 
		INTO SECURITY
		VALUES (#prfs_num#,
				#prfs_pw#,
				'1',
				'ROLE_PROF' 
		)
	</insert>
	
	
	
	
	<!-- 학생등록 -->
	<insert id="insertStudent" parameterType="com.avengers.db.dto.StudVO">
	INSERT 
		INTO STUDENT
		VALUES(
			#{STUD_NUM},
			#{STUD_NM},	
			#{STUD_ENG_NM},	
			#{STUD_BIR},	
			#{STUD_EMAIL},	
			#{STUD_PW},	
			#{STUD_GRD},	
			#{STUD_REGNO},	
			#{STUD_GEN},	
			#{STUD_QTR},	
			#{STUD_SCHREG_CODE},	
			#{STUD_PIC},	
			#{STUD_ACT_NUM},	
			#{STUD_BANK},	
			#{STUD_AH},	
			#{STUD_ADDR},	
			#{STUD_ZIP},	
			#{STUD_TEL},	
			#{STUD_HP},	
			#{STUD_DEPT},	
			#{STUD_GUAD_NM},	
			#{STUD_GUAD_REL},	
			#{STUD_GUAD_HP},	
			'1',
			'ROLE_STUD',	
			#{STUD_MAX_CRD}	
		)
	
	</insert>
</mapper>
